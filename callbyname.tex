\documentclass[10pt]{beamer}

\usetheme[progressbar=frametitle]{metropolis}
\usepackage{appendixnumberbeamer}
\usepackage[sfdefault]{FiraSans}
\usepackage{FiraMono}

\usepackage{booktabs}
\usepackage[scale=2]{ccicons}

\usepackage{pgfplots}
\usepgfplotslibrary{dateplot}

\usepackage{listings}

\usepackage{tikz}

\usepackage{xspace}
\newcommand{\themename}{\textbf{\textsc{metropolis}}\xspace}

%%% Relevant videos
% https://www.youtube.com/watch?v=NX7D5eEh2n0
%

%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% UNCC Theme Adjustments %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{CanvasBG}{HTML}{FAFAFA}

% From the official style guide
\definecolor{UnccGreen}{HTML}{00703C}
\definecolor{UnccGold}{HTML}{B3A369}
\definecolor{UnccLightGreen}{HTML}{C3D7A4}
\definecolor{UnccYellow}{HTML}{F0CB00}
\definecolor{UnccOrange}{HTML}{F3901D}
\definecolor{UnccLightYellow}{HTML}{FFF6DC}
\definecolor{UnccBlue}{HTML}{00728F}
\definecolor{UnccPink}{HTML}{DE3A6E}
\definecolor{White}{HTML}{FFFFFF}
\definecolor{LightGray}{HTML}{DDDDDD}

% Supporting Color Palette
\definecolor{WarmGray}{HTML}{696158}
\definecolor{StoneGray}{HTML}{717C7D}
\definecolor{DarkGreen}{HTML}{2C5234}
\definecolor{LightGreen}{HTML}{509E2F}
\definecolor{BrightGold}{HTML}{F0CB00}

% Screamers
\definecolor{Royal}{HTML}{72246C}
\definecolor{Ocean}{HTML}{006BA6}
\definecolor{Flash}{HTML}{B52555}
\definecolor{Citrus}{HTML}{FFB81C}
\definecolor{Spring}{HTML}{CEDC00}

% Serenity
\definecolor{Garden}{HTML}{B7CE95}
\definecolor{Sand}{HTML}{F0E991}
\definecolor{Bloom}{HTML}{F1E6B2}
\definecolor{Clay}{HTML}{B7B09C}
\definecolor{Cloud}{HTML}{BAC5B9}

% Set colors here
\setbeamercolor{frametitle}{bg=UnccGreen}
\setbeamercolor{progress bar}{bg=BrightGold, fg=UnccGreen}
\setbeamercolor{alerted text}{fg=Flash}

\setbeamercolor{block title}{bg=LightGreen, fg=White}
\setbeamercolor{block title example}{bg=Ocean, fg=White}
\setbeamercolor{block title alerted}{bg=Citrus, fg=White}
\setbeamercolor{block body}{bg=CanvasBG}

\metroset{titleformat=smallcaps, progressbar=foot}

\makeatletter
\setlength{\metropolis@progressinheadfoot@linewidth}{2pt}
\setlength{\metropolis@titleseparator@linewidth}{2pt}
\setlength{\metropolis@progressonsectionpage@linewidth}{2pt}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% UNCC Theme Adjustments %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\lstset{
  basicstyle=\scriptsize\ttfamily,
  keywordstyle=\color{Ocean},
  stringstyle=,
  xleftmargin=1em,
  showstringspaces=false,
  commentstyle=\itshape\rmfamily,
  columns=flexible,
  keepspaces=true,
  texcl=true
}
\lstset{escapeinside={<@}{@>}}

% https://www.mathcha.io/editor

\title{Call-by-name, Call-by-value, Call-by-need, and the Linear Lambda Calculus}
% subtitle:
\subtitle{Short Talk}

% \date{\today}
\date{}
\author{Quentin Schroeder}
\institute{MPRI - Université Paris-Cité}
\titlegraphic{\hfill\includegraphics[height=1.5cm]{logo.pdf}}

\begin{document}

\maketitle

% Outline
% 1. Motivation - why do we care about evaluation strategies
% 2. Preliminaries - introduce the lambda calculus and the two evaluation strategies
% 3. Call by Name - explain the evaluation strategy and its properties
% 4. Call by Name - give examples in the lambda calculus
% 5. Detour: Call by Need - explain the evaluation strategy and its properties
% 6. Detour: Call by Need - give examples in haskell
% 7. Call by Value - explain the evaluation strategy and its properties
% 8. Call by Value - give examples in Ocaml

\section[Idea]{Motivation}

% give two code examples
% one is a place where call by name is better
% one is a place where call by value is better
% explain the difference between the two

% then give code examples in ocaml vs haskell to compare call by need and call by value

\begin{frame}[fragile]{Motivation}
  \begin{alertblock}{Problem}
    We want to understand how to evaluate expressions in the lambda calculus.\\
    % enumerate with alerts
  \end{alertblock}

  \begin{itemize} [<+- | alert@+>]
    \item Call by Name
    \item Call by Value
    \item Call by Need
  \end{itemize}
\end{frame}


\begin{frame}[fragile]{Call by value (Python)}
  \begin{alertblock}{Normal example}
  \begin{lstlisting}[language=Python]
    def f(x):
      return x + x

    print(f(2 + 3))
  \end{lstlisting}
  \end{alertblock}

  \pause

  \begin{alertblock}{Evil example}
  \begin{lstlisting}[language=Python]
    def project(x, y):
      return x

    def loop():
      return loop()

    print(project(2, loop()))
  \end{lstlisting}
  \end{alertblock}
\end{frame}


\begin{frame}[fragile]{Call by value (Ocaml)}
  \begin{alertblock}{Examples}
  \begin{lstlisting}[language=Caml, literate={_}{\_}{1}]
    let rec dumb_works n = if (n = 0 && n = 1) then dumb n else 42

    let force_eval_branch b l r = if b then l else r

    let rec dumb_breaks n = force_eval_branch (n = 0 && n = 1) (dumb_breaks n) 42

    let () = print_int (dumb_works 0)
    let () = print_int (dumb_breaks 0)

  \end{lstlisting}
  \end{alertblock}
\end{frame}


\begin{frame}[fragile]{Call by need (Haskell)}
  \begin{alertblock}{Example}
  \begin{lstlisting}[language=Haskell]
    dumb n = if (n == 0 && n == 1) then dumb n else 42

    forceEvalBranch b l r = if b then l else r

    dumb2 n = forceEvalBranch (n == 0 && n == 1) (dumb2 n) 42

    main = do
        print $ dumb 0
        print $ dumb 1
        print $ dumb2 0
        print $ dumb2 1

  \end{lstlisting}
  \end{alertblock}

  \pause

  \begin{alertblock}{Example}
  \begin{lstlisting}[language=Haskell]
    project x y = x

    loop x = loop x

    main = print $ project 2 (loop 3)
  \end{lstlisting}
  \end{alertblock}


\end{frame}

\begin{frame}[fragile]{Call by Name (???)}
  \begin{alertblock}{Is there a call by name programming language?}
    Yes \dots kind of \dots
  \end{alertblock}

  \begin{alertblock}{Example}
    Consider the following:
  \begin{lstlisting}[language=, literate={_}{\_}{1}]
    let rec horrible n = if n = 0 then 1 else n * horrible (n - 1) * horrible (n - 1)

    let printalot m =
      let () = print_endline (string_of_int m) in
      let () = print_endline (string_of_int m) in
      let () = print_endline (string_of_int m) in
      let () = print_endline (string_of_int m)

    let () = printNTimes (horrible 40)

  \end{lstlisting}
  \end{alertblock}
\end{frame}




% overview slide



\section{Conclusion}



\begin{frame}[standout]
  Thank you
\end{frame}

\begin{frame}[allowframebreaks]{References}
  \cite[]{Maraist1995Jan}
  \cite[]{Plotkin1975Dec}
  \bibliographystyle{plainnat}
  \bibliography{sources}
\end{frame}



\end{document}
